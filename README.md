# nfc-rename

NFC-Rename is a desktop application (Mac/Windows) that manages recording file names for Nocturnal Flight Calls (NFC). The recording date and time and site name are added to the beginning of the file name.

## 概要：

- ファイル名に666形式と呼ぶ、6桁で表される"録音日時"、"録音開始時刻"、"録音終了時刻"と、サイト名が追加されます。
- 録音日時はファイルスタンプと音声の長さから、サイト名はユーザ入力により生成されます。
- 音声データが2GBを超えるとICレコーダによってはタイムスタンプが同じで自動分割されるので、この録音時間を復元します。
- マルチプラットフォームで動作します。仕組みはpythonとfletを用いました。
- 対応するICレコーダは**オリンパス製のDM-750、LS-7、TASCAM製のDR-05[Ver.0.1]**です。

## 機能：

- nfc録音調査用にファイルのリネーム、ファイル名の復元、タイムスタンプの設定、音声分割ができます。

#### リネーム：

- フォルダ内の全てのWAVファイルとMP3ファイルをリネームします。
- DM-750やLS-7の場合、同一録音で自動分割されたファイルでも録音開始時刻を正確に生成します。
- リネームは６６６＋形式です。すでに666形式のファイルは変換されません。
- ファイルのタイムスタンプはOS上での操作や音声アプリで書き換えられることがあるので、ICレコーダからパソコンに取り込むときにリネームすることをお勧めします。

#### ファイル名の復元：

- 666形式のファイル名からオリジナルのファイル名に復元できます。
- 復元するときにファイルのタイムスタンプも設定されます。
- ICレコーダによってタイムスタンプが録音開始か録音終了かの2種類があるので、録音したICレコーダを選択してください。

#### タイムスタンプの設定：

- ファイルごとにタイムスタンプを設定できます。
- 複数のファイルを選択でき、同じタイムスタンプに設定することで同一録音に設定することができます。この場合、オリジナルのファイル名は連続している必要があります。
- 日時と時刻の設定は6桁の数字で入力します。

#### 音声分割：

- 666形式のファイルを1時間ごとに分割することができます。
- 分割は0分0秒ちょうどで行われ、新しいファイル名も666形式で生成されます。
- 長時間録音ファイルを処理しやすい1時間単位に分割するのに便利です。

## 使い方：

1. アプリケーションの場所：
   1. MacOSX:
   2. Windows10/11:

1. ICレコーダの音声データが入っているデバイスまたはメモリをPC/Macに接続（マウント）してください。
2. nfc-renameのアプリをダブルクリックしてください。
3. リネーム：
   1. サイト名を入力してください。
   2. ICレコーダを選んでください。もしなければ、追加しますのでご連絡ください。
   3. 音声フォルダを選んでください。ファイル名、タイムスタンプ、長さの情報が表示されます。
   4. 出力フォルダを選んでください。
   5. 変換前後のファイル名を確認して、リネーム実行してください。
   6. ICレコーダの設定を変えたら、再度フォルダを選び直してください。

4. ファイル名復元：
   1. ICレコーダを選択してください。
   2. ファイルを選択してください。
   3. 復元前後のファイル名を確認して、復元ボタンを押してください。

5. タイムスタンプ変更：
   1. ファイルを選択します。複数選択可能。
   2. 日時と時刻を6桁の数字で入力してください。
      1. 例）2024-01-01　→　240101
      2. 例）12:34:56　　 →　123456
   3. タイムスタンプ変更ボタンを押してください。

6. 音声分割：
   1. 666形式のファイルを選択します。
   2. 「1時間ごとに分割」ボタンを押してください。
   3. 分割結果が表示されます。

## ICレコーダーの特性：

- **DM-750**、**LS-7**（オリンパス）：タイムスタンプは録音開始時刻です。2GBを超えると自動分割され、すべての分割ファイルは同じタイムスタンプを持ちます。
- **DR-05**（TASCAM）：タイムスタンプは録音終了時刻です。

## セキュリティ：

- MacOSXではダウンロードしたアプリは直ぐに立ち上げることができないようになっています。

![セキュリティーアラート](./security-0.png)

- そのため、**システム設定**で個別に許可してください。左下の南京錠を解除すると選択できるようになります。

![ダウンロードしたアプリケーションの実行許可](./security-1.png)